<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Signature Collection</title>
    
    <meta property="og:title" content="You have a digital envelope... ğŸ’Œ">
    <meta property="og:description" content="Someone special has sent you a Signature Bouquet. Tap to open.">
    
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=Alex+Brush&family=Great+Vibes&family=Dancing+Script&family=Parisienne&family=Playfair+Display:ital@1&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="theme-ivory">

    <div id="landscape-lock">
        <h2>Please Rotate Your Phone ğŸ“±</h2>
        <p>This experience is designed to be viewed upright.</p>
    </div>

    <div id="magic-container"></div>

    <div class="app-container">
        
        <div id="loading-screen" class="hidden gallery-card envelope-container">
            <div class="spinner"></div>
            <p style="margin-top: 15px; font-style: italic; color: #7A7A7A;">Preparing your delivery...</p>
        </div>

        <div id="envelope-screen" class="hidden gallery-card envelope-container">
            <div class="envelope-content">
                <p class="envelope-label">A digital delivery for</p>
                <h1 id="envelope-name" style="font-family: 'Great Vibes', cursive; font-size: 3.5rem; margin: 10px 0;">Someone Special</h1>
                <button class="btn-seal" onclick="openEnvelope()">Break the Seal ğŸ•¯ï¸</button>
            </div>
        </div>

        <div id="view-mode" class="hidden gallery-card view-container">
            <canvas id="scratch-card"></canvas>
            <div id="revealed-content" class="locked-content">
                <h1 style="font-size: 2rem;">For You ğŸ¤</h1>
                <div class="image-wrapper">
                    <img id="shared-bouquet-img" src="" alt="Your Bouquet">
                </div>
                <div class="scrollable-message">
                    <p id="shared-message" class="message-text"></p>
                    <p id="shared-signature" class="signature-text"></p>
                </div>
                <button class="btn-primary" id="reply-btn" onclick="window.location.href=window.location.pathname">Create Your Own</button>
                <button class="btn-secondary hidden" id="close-preview-btn" onclick="closePreview()">Close Preview</button>
            </div>
            <button id="skip-scratch-btn" class="hidden btn-secondary skip-btn" onclick="forceReveal()">Skip Reveal ğŸª„</button>
        </div>

        <div id="edit-mode">
            
            <div id="step-1" class="step-container">
                <h1>1. The Collection</h1>
                <p class="subtitle">Select your masterpiece.</p>
                
                <div class="gallery-card">
                    <div class="carousel">
                        <button class="btn-nav" onclick="prevBouquet()">â®</button>
                        <img id="current-bouquet-img" src="assets/1.png" alt="Bouquet Selection">
                        <button class="btn-nav" onclick="nextBouquet()">â¯</button>
                    </div>
                    <p class="bouquet-label">Bouquet <span id="bouquet-counter">1</span> / 33</p>
                </div>
                
                <button class="btn-primary" onclick="goToStep(2)">Next: Design Your Note ğŸ–‹ï¸</button>
            </div>

            <div id="step-2" class="step-container hidden">
                <h1>2. The Details</h1>
                <p class="subtitle">Customize the presentation.</p>

                <div class="message-box">
                    <input type="text" id="recipient-name" class="signature-input" placeholder="Recipient's Name (e.g., Sarah)" style="text-align: left;" oninput="saveDraft()">
                    
                    <div class="textarea-wrapper">
                        <textarea id="custom-message" placeholder="Write something beautiful..." maxlength="300" oninput="saveDraft()"></textarea>
                        <span class="char-counter" id="char-count">0/300</span>
                    </div>

                    <input type="text" id="sender-name" class="signature-input" placeholder="Sign your name (e.g., - Love, Alex)" oninput="saveDraft()">
                    
                    <p class="section-label">Typography:</p>
                    <div class="font-picker">
                        <button class="font-btn active" style="font-family: 'Alex Brush', cursive;" onclick="changeFont(this, 'Alex Brush')">Aa</button>
                        <button class="font-btn" style="font-family: 'Great Vibes', cursive;" onclick="changeFont(this, 'Great Vibes')">Aa</button>
                        <button class="font-btn" style="font-family: 'Parisienne', cursive;" onclick="changeFont(this, 'Parisienne')">Aa</button>
                        <button class="font-btn" style="font-family: 'Dancing Script', cursive;" onclick="changeFont(this, 'Dancing Script')">Aa</button>
                        <button class="font-btn" style="font-family: 'Playfair Display', serif; font-style: italic;" onclick="changeFont(this, 'Playfair Display')">Aa</button>
                    </div>

                    <p class="section-label">Cardstock Theme:</p>
                    <div class="color-picker">
                        <button class="color-btn active" style="background: #FDFCF8;" onclick="changeTheme(this, 'ivory')"></button>
                        <button class="color-btn" style="background: #FFF0F3;" onclick="changeTheme(this, 'blush')"></button>
                        <button class="color-btn" style="background: #F0F4F1;" onclick="changeTheme(this, 'sage')"></button>
                        <button class="color-btn" style="background: #F4F0F8;" onclick="changeTheme(this, 'lavender')"></button>
                        <button class="color-btn" style="background: #1A1C20; border: 1px solid #555;" onclick="changeTheme(this, 'midnight')"></button>
                    </div>
                </div>

                <div class="button-row">
                    <button class="btn-secondary" onclick="goToStep(1)">Back</button>
                    <button class="btn-primary" onclick="validateAndProceed()">Next: Finalize ğŸ’Œ</button>
                </div>
            </div>

            <div id="step-3" class="step-container hidden">
                <h1>3. Ready to Send</h1>
                <p class="subtitle">Your digital envelope is sealed.</p>
                
                <button class="btn-secondary" style="margin-bottom: 15px;" onclick="previewCard()">ğŸ‘€ Test The Experience</button>
                <button class="btn-primary" onclick="generateLink()">Generate Unique Link ğŸ”—</button>
                
                <div id="share-link-container" class="hidden share-box">
                    <input type="text" id="share-link" readonly>
                    <button class="btn-secondary copy-btn" onclick="copyLink()">Copy Link</button>
                    <p style="margin-top: 15px; font-size: 0.9rem; color: #7A7A7A;">Text this link to them safely!</p>
                </div>

                <button class="btn-secondary" style="margin-top: 20px; border: none;" onclick="goToStep(2)">Wait, edit note</button>
            </div>

        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>
